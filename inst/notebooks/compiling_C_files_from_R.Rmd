---
title: "R Notebook"
output: html_notebook
---

```{r}
setwd(src)
system("R CMD SHLIB foo.c")
```

```{r}
setwd(src)
if (.Platform$OS.type == "windows") dyn.load(paste("foo", "dll", sep = "."))
if (.Platform$OS.type == "unix")    dyn.load(paste("foo", "so", sep = "."))
```


```{r}

foo <- function() {
  result <- .C("foo", as.integer(3))
  return(result$x)
}

foo()
```



Remove the files if want to start over:

```{r}
file.remove("foo.o", "foo.dll", "foo.so", "different_foo.dll")
```